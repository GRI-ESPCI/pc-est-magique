{% extends "base.html" %} {% block app_content %}
<div class="row mb-3">
  <div class="col">
    <h3>{{ title }}</h3>
  </div>
</div>

<h4>{{ _("Informations : ")}}</h4>

<ul>
  <li>{{ _("Saison : ")}} {{ spectacle.season.nom}}</li>
  <li>{{ _("Catégorie : ")}} {{ spectacle.categorie}}</li>
  <li>{{ _("Date : ")}} {{ spectacle.date}}</li>
  <li>{{ _("Nombre tickets : ")}} {{ spectacle.nb_tickets}}</li>
  <li>
    {{ _("Prix : ")}} {{ babel.format_currency(spectacle.unit_price, "EUR") }}
  </li>
  <li>{{ _("Places demandées : ")}} {{ spectacle.sum_places_demandees}}</li>
  <li>{{ _("Places attribuées : ")}} {{ spectacle.sum_places_attribuees}}</li>
</ul>

<h4>{{ _("Voeux : ")}}</h4>

<div class="row">
  <div class="col table-responsive">
    <table class="table table-striped table-hover table-bordered">
      <thead>
        <tr>
          <th scope="col">{{ _("ID") }}</th>
          <th scope="col">{{ _("Pcéen") }}</th>
          <th scope="col">{{ _("Priorité") }}</th>
          <th scope="col">{{ _("Demandées") }}</th>
          <th scope="col">{{ _("Minimum") }}</th>
          <th scope="col">{{ _("Attribuées") }}</th>
          <th scope="col">{{ _("Prix total") }}</th>
        </tr>
      </thead>

      <tbody>
        {% for voeu in voeux %}
        <tr>
          <td>{{ voeu.id }}</td>
          <td>{{ voeu.pceen.full_name }}</td>
          <td>{{ voeu.priorite }}</td>
          <td>{{ voeu.places_demandees }}</td>
          <td>{{ voeu.places_minimum }}</td>
          <td>{{ voeu.places_attribuees }}</td>
          <td>
            {{ babel.format_currency(spectacle.unit_price *
            voeu.places_attribuees, "EUR") }}
          </td>
        </tr>
        {% endfor %}
        <tr>
          <td><b>{{ _("Total") }}</b></td>
          <td><b>{{ _("-") }}</b></td>
          <td><b>{{ _("-") }}</b></td>
          <td><b>{{ spectacle.sum_places_demandees }}</b></td>
          <td><b>{{ _("-") }}</b></td>
          <td><b>{{ spectacle.sum_places_attribuees }}</b></td>
          <td>
            <b
              >{{
              babel.format_currency(spectacle.unit_price*spectacle.sum_places_attribuees,
              "EUR") }}</b
            >
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

{% endblock %}
