{% extends "base.html" %}

{% block app_content %}

<h1>{{ v4a.name }} - {{ _("Billeterie") }}</h1>

<form action="" method="post" role="form">
    {{ form.hidden_tag() }}

    <div class="mb-3">
        <label for="first_name" class="form-label">{{ form.first_name.label }}</label>
        {{ form.first_name(class_="form-control")}}
    </div>
    <div class="mb-3">
        <label for="last_name" class="form-label">{{ form.last_name.label }}</label>
        {{ form.last_name(class_="form-control")}}
    </div>
    <div class="mb-3">
        <label for="email" class="form-label">{{ form.email.label }}</label>
        {{ form.email(class_="form-control")}}
    </div>
    <div class="mb-3">
        <label for="phone_number" class="form-label">{{ form.phone_number.label }}</label>
        {{ form.phone_number(class_="form-control")}}
    </div>
    <div class="mb-3">
        <label for="representation" class="form-label">{{ form.representation.label }}</label>
        <select class="form-select" name="representation" required id="representation"></select>
    </div>
    <div class="mb-3">
        <label for="pricing" class="form-label">{{ form.pricing.label }}</label>
        {{ form.pricing(class_="form-select") }}
    </div>
    {{ form.submit(class_="btn btn-primary") }}
</form>

{# Fix for momentjs inside options of select input #}
<script>
window.addEventListener('load', () => {
    const select = document.getElementById("representation");
    {% for rep in v4a.representations %}
        var option = document.createElement("option");
        option.text = moment('{{ rep.date }}').format('dddd DD MMMM YYYY - HH:mm');
        option.value = "{{ rep.id }}";
        select.appendChild(option);
    {% endfor %}
});
</script>
{% endblock %}
